<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nike Lake Resort - Universal Booking System</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', system-ui, sans-serif;
            background: linear-gradient(135deg, #1e3a8a 0%, #3b82f6 50%, #06b6d4 100%);
            min-height: 100vh;
        }

        .hero {
            color: white;
            padding: 60px 20px;
            text-align: center;
        }

        .hero h1 {
            font-size: 3.5rem;
            font-weight: 800;
            margin-bottom: 1rem;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
        }

        .hero p {
            font-size: 1.3rem;
            opacity: 0.9;
            margin-bottom: 2rem;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
        }

        .hero .subtitle {
            font-size: 1.1rem;
            opacity: 0.8;
            margin-bottom: 3rem;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        .demo-section {
            background: white;
            border-radius: 20px;
            padding: 40px;
            margin: -50px 20px 40px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
        }

        .demo-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
            margin: 30px 0;
        }

        .demo-card {
            background: #f8fafc;
            border: 2px solid #e2e8f0;
            border-radius: 16px;
            padding: 30px;
            text-align: center;
            transition: all 0.3s ease;
        }

        .demo-card:hover {
            border-color: #3b82f6;
            box-shadow: 0 10px 25px rgba(59, 130, 246, 0.15);
            transform: translateY(-5px);
        }

        .demo-card.featured {
            background: linear-gradient(135deg, #fef3c7 0%, #fbbf24 100%);
            border-color: #f59e0b;
        }

        .demo-card.featured:hover {
            border-color: #d97706;
            box-shadow: 0 10px 25px rgba(245, 158, 11, 0.3);
        }

        .demo-card h3 {
            font-size: 1.5rem;
            font-weight: 700;
            color: #1f2937;
            margin: 0 0 15px 0;
        }

        .demo-card p {
            color: #6b7280;
            margin: 0 0 25px 0;
            line-height: 1.6;
        }

        .demo-card .features {
            text-align: left;
            margin: 20px 0;
            background: white;
            padding: 20px;
            border-radius: 12px;
            border: 1px solid #e5e7eb;
        }

        .demo-card .features h4 {
            font-size: 1rem;
            font-weight: 600;
            color: #374151;
            margin: 0 0 10px 0;
        }

        .demo-card .features ul {
            list-style: none;
            margin: 0;
            padding: 0;
        }

        .demo-card .features li {
            color: #6b7280;
            margin: 6px 0;
            font-size: 14px;
            display: flex;
            align-items: center;
        }

        .demo-card .features li::before {
            content: "‚úì";
            color: #10b981;
            font-weight: bold;
            margin-right: 8px;
        }

        .btn {
            background: #3b82f6;
            color: white;
            padding: 15px 30px;
            border: none;
            border-radius: 12px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s ease;
            box-shadow: 0 4px 12px rgba(59, 130, 246, 0.3);
            width: 100%;
        }

        .btn:hover {
            background: #2563eb;
            transform: translateY(-2px);
            box-shadow: 0 6px 16px rgba(59, 130, 246, 0.4);
        }

        .btn.primary {
            background: #f97316;
            box-shadow: 0 4px 12px rgba(249, 115, 22, 0.3);
        }

        .btn.primary:hover {
            background: #ea580c;
            box-shadow: 0 6px 16px rgba(249, 115, 22, 0.4);
        }

        .btn.success {
            background: #10b981;
            box-shadow: 0 4px 12px rgba(16, 185, 129, 0.3);
        }

        .btn.success:hover {
            background: #059669;
            box-shadow: 0 6px 16px rgba(16, 185, 129, 0.4);
        }

        .status-panel {
            background: #f0f9ff;
            border: 2px solid #0ea5e9;
            border-radius: 12px;
            padding: 20px;
            margin: 30px 0;
            text-align: center;
        }

        .status-panel h4 {
            color: #0369a1;
            margin: 0 0 10px 0;
            font-size: 1.1rem;
        }

        .status-panel p {
            color: #0284c7;
            margin: 0;
        }

        .info-section {
            background: #fef3c7;
            border: 2px solid #f59e0b;
            border-radius: 12px;
            padding: 25px;
            margin: 30px 0;
        }

        .info-section h4 {
            color: #92400e;
            margin: 0 0 15px 0;
            font-size: 1.2rem;
        }

        .info-section .endpoint {
            background: #1f2937;
            color: #10b981;
            padding: 12px 16px;
            border-radius: 8px;
            font-family: 'SF Mono', Monaco, monospace;
            font-size: 14px;
            margin: 8px 0;
            border: 1px solid #374151;
        }

        .code-example {
            background: #1f2937;
            color: #f9fafb;
            padding: 20px;
            border-radius: 12px;
            font-family: 'SF Mono', Monaco, monospace;
            font-size: 14px;
            margin: 20px 0;
            overflow-x: auto;
        }

        .highlight {
            background: rgba(249, 115, 22, 0.1);
            padding: 15px;
            border-left: 4px solid #f97316;
            border-radius: 8px;
            margin: 20px 0;
        }

        .highlight h4 {
            color: #ea580c;
            margin: 0 0 10px 0;
        }

        .highlight p {
            color: #9a3412;
            margin: 0;
            line-height: 1.5;
        }
    </style>
</head>

<body>
    <div class="hero">
        <div class="container">
            <h1>üèñÔ∏è Nike Lake Resort</h1>
            <p>Experience the perfect blend of business and leisure in our peaceful waterfront setting</p>
            <p class="subtitle">Universal Booking System - Demo & Testing Environment</p>
        </div>
    </div>

    <div class="container">
        <div class="demo-section">
            <h2 style="text-align: center; margin-bottom: 2rem; font-size: 2rem; color: #1f2937;">
                üéØ Booking System Demonstration
            </h2>

            <div class="highlight">
                <h4>üöÄ New Default Behavior</h4>
                <p>When no business type identifier is specified, the widget now shows a comprehensive list of all
                    available bookings, allowing users to choose what they want to book.</p>
            </div>

            <div class="demo-grid">
                <!-- All Bookables (Default) -->
                <div class="demo-card featured">
                    <h3>üìã All Bookables (Default)</h3>
                    <p>Shows the main booking page with all available services when no identifier is provided.</p>
                    <div class="features">
                        <h4>What's Included:</h4>
                        <ul>
                            <li>Entry tickets with pricing</li>
                            <li>UDH experience booking</li>
                            <li>Hotel room reservations</li>
                            <li>Restaurant reservations</li>
                            <li>Event venue booking</li>
                            <li>Guided tours</li>
                        </ul>
                    </div>
                    <button data-universal-booking data-config='{"businessType": null}' class="wp-block-button__link">
                        Entry Tickets only button
                    </button>
                    <button onclick="openAllBookables()" class="btn primary">
                        View All Bookables
                    </button>
                </div>

                <!-- Entry Tickets (Featured) -->
                <div class="demo-card featured">
                    <h3>üé´ Entry Tickets (Working)</h3>
                    <p>Fully implemented entry ticket booking with 3-step flow matching your UI design.</p>
                    <div class="features">
                        <h4>‚úÖ Features:</h4>
                        <ul>
                            <li>Ticket selection with quantities</li>
                            <li>Real-time pricing calculation</li>
                            <li>Customer information form</li>
                            <li>Paystack payment integration</li>
                        </ul>
                    </div>
                    <button onclick="openEntryTickets()" class="btn primary">
                        Book Entry Tickets
                    </button>
                </div>

                <!-- UDH Experience -->
                <div class="demo-card">
                    <h3>üè† UDH Experience</h3>
                    <p>Unique upside-down house experience with specialized booking flow.</p>
                    <div class="features">
                        <h4>üöß Coming Soon:</h4>
                        <ul>
                            <li>Time slot selection</li>
                            <li>Group size management</li>
                            <li>Photo session booking</li>
                            <li>Special packages</li>
                        </ul>
                    </div>
                    <button onclick="openUDHExperience()" class="btn success">
                        Book UDH Experience
                    </button>
                </div>


            </div>

            <div class="status-panel" id="statusPanel">
                <h4>System Status</h4>
                <p id="statusMessage">Universal Booking Widget loading...</p>
            </div>


        </div>
    </div>

    <!-- Load the Universal Booking Widget -->
    <script src="dist/universal-booking-widget.min.js"></script>

    <script>
        function updateStatus(message, type = 'info') {
            const statusEl = document.getElementById('statusMessage');
            statusEl.textContent = message;

            const panelEl = document.getElementById('statusPanel');
            const colors = {
                info: { bg: '#f0f9ff', border: '#0ea5e9', text: '#0284c7' },
                success: { bg: '#f0fdf4', border: '#10b981', text: '#059669' },
                error: { bg: '#fef2f2', border: '#ef4444', text: '#dc2626' }
            };

            const color = colors[type];
            panelEl.style.background = color.bg;
            panelEl.style.borderColor = color.border;
            statusEl.style.color = color.text;
        }

        function openAllBookables() {
            updateStatus('Opening universal bookables list...', 'info');

            try {
                // APPROACH 1: Destroy any existing widgets first
                if (window.UniversalBookingWidget && window.UniversalBookingWidget.destroyAll) {
                    window.UniversalBookingWidget.destroyAll();
                }

                // APPROACH 2: Create config that forces bookables list
                const config = {
                    businessType: undefined, // Try undefined instead of null
                    identifier: undefined,   // Make sure identifier is also undefined
                    showBookablesList: true, // Explicitly request bookables list
                    apiBaseUrl: 'http://127.0.0.1:8000/api',
                    branding: {
                        primaryColor: '#f97316',
                        companyName: 'Nike Lake Resort'
                    },
                    autoShow: true // Auto open
                };

                console.log('üîß Opening with config:', config);

                const widget = UniversalBookingWidget.init(config);
                // Don't call widget.open() since autoShow is true

                updateStatus('Universal bookables list opened', 'success');

            } catch (error) {
                console.error('Error opening bookables:', error);
                updateStatus('Error: ' + error.message, 'error');

                // FALLBACK: Try a different approach
                setTimeout(() => {
                    try {
                        console.log('üîÑ Trying fallback approach...');
                        const fallbackWidget = UniversalBookingWidget.init();
                        fallbackWidget.open();
                        updateStatus('Fallback: Universal bookables opened', 'success');
                    } catch (fallbackError) {
                        console.error('Fallback also failed:', fallbackError);
                        updateStatus('Both attempts failed', 'error');
                    }
                }, 100);
            }
        }
        function openEntryTickets() {
            updateStatus('Opening entry ticket booking...', 'info');

            try {
                const widget = UniversalBookingWidget.init({
                    businessType: 'entry',
                    apiBaseUrl: 'http://127.0.0.1:8000/api',
                    branding: {
                        primaryColor: '#f97316',
                        companyName: 'Nike Lake Resort'
                    }
                });

                widget.open();
                updateStatus('Entry ticket booking opened', 'success');

            } catch (error) {
                console.error('Error opening entry tickets:', error);
                updateStatus('Error: ' + error.message, 'error');
            }
        }

        function openUDHExperience() {
            updateStatus('UDH experience not implemented yet', 'info');

            try {
                const widget = UniversalBookingWidget.init({
                    businessType: 'udh',
                    apiBaseUrl: 'http://127.0.0.1:8000/api',
                    branding: {
                        primaryColor: '#10b981',
                        companyName: 'Nike Lake Resort - UDH'
                    }
                });

                widget.open();

            } catch (error) {
                updateStatus('UDH adapter not implemented yet', 'error');
            }
        }

        function openHotelBooking() {
            updateStatus('Hotel booking not implemented yet', 'info');

            try {
                const widget = UniversalBookingWidget.init({
                    businessType: 'hotel',
                    apiBaseUrl: 'http://127.0.0.1:8000/api',
                    branding: {
                        primaryColor: '#3b82f6',
                        companyName: 'Nike Lake Resort - Hotel'
                    }
                });

                widget.open();

            } catch (error) {
                updateStatus('Hotel adapter not implemented yet', 'error');
            }
        }

        function openTours() {
            updateStatus('Tours booking not implemented yet', 'info');

            try {
                const widget = UniversalBookingWidget.init({
                    businessType: 'tours',
                    apiBaseUrl: 'http://127.0.0.1:8000/api',
                    branding: {
                        primaryColor: '#0ea5e9',
                        companyName: 'Nike Lake Resort - Tours'
                    }
                });

                widget.open();

            } catch (error) {
                updateStatus('Tours adapter not implemented yet', 'error');
            }
        }

        function openRestaurant() {
            updateStatus('Restaurant booking not implemented yet', 'info');

            try {
                const widget = UniversalBookingWidget.init({
                    businessType: 'restaurant',
                    apiBaseUrl: 'http://127.0.0.1:8000/api',
                    branding: {
                        primaryColor: '#f59e0b',
                        companyName: 'Nike Lake Resort - Restaurant'
                    }
                });

                widget.open();

            } catch (error) {
                updateStatus('Restaurant adapter not implemented yet', 'error');
            }
        }
        function debugOpenAllBookables() {
            console.log('üêõ DEBUG: Starting openAllBookables...');
            updateStatus('DEBUG: Opening universal bookables list...', 'info');

            try {
                const config = {
                    businessType: null,
                    apiBaseUrl: 'http://127.0.0.1:8000/api',
                    branding: {
                        primaryColor: '#f97316',
                        companyName: 'Nike Lake Resort'
                    }
                };

                console.log('üêõ Creating widget with config:', config);
                const widget = UniversalBookingWidget.init(config);

                console.log('üêõ Widget created:', widget);
                console.log('üêõ Widget container:', widget.container);
                console.log('üêõ Container in DOM:', document.body.contains(widget.container));

                // Check if container is visible
                const containerStyle = window.getComputedStyle(widget.container);
                console.log('üêõ Container styles:', {
                    display: containerStyle.display,
                    visibility: containerStyle.visibility,
                    opacity: containerStyle.opacity,
                    position: containerStyle.position,
                    zIndex: containerStyle.zIndex
                });

                widget.open();

                // After opening, check what's in the container
                setTimeout(() => {
                    console.log('üêõ Container innerHTML after opening:', widget.container.innerHTML);
                    console.log('üêõ Container children:', widget.container.children);

                    // Look for the UniversalBookablesList component
                    const bookablesList = widget.container.querySelector('.universal-booking-app');
                    console.log('üêõ Found bookables list element:', bookablesList);

                    if (bookablesList) {
                        const listStyle = window.getComputedStyle(bookablesList);
                        console.log('üêõ Bookables list styles:', {
                            display: listStyle.display,
                            visibility: listStyle.visibility,
                            opacity: listStyle.opacity,
                            width: listStyle.width,
                            height: listStyle.height
                        });
                    }

                    updateStatus('DEBUG: Check browser console for details', 'info');
                }, 1000);

            } catch (error) {
                console.error('üêõ DEBUG Error:', error);
                console.error('üêõ Stack trace:', error.stack);
                updateStatus('DEBUG Error: ' + error.message, 'error');
            }
        }
        // Event listeners
        document.addEventListener('ubw:open-widget', function (e) {
            console.log('Widget opened:', e.detail.widgetId);
        });

        document.addEventListener('ubw:close-widget', function (e) {
            console.log('Widget closed:', e.detail.widgetId);
        });

        // Initialize page
        window.addEventListener('load', function () {
            setTimeout(() => {
                if (typeof UniversalBookingWidget !== 'undefined') {
                    updateStatus('Universal Booking System ready!', 'success');

                    const supportedTypes = UniversalBookingWidget.getSupportedBusinessTypes();
                    console.log('Supported business types:', supportedTypes);
                    console.log('‚úÖ Entry tickets:', supportedTypes.includes('entry') ? 'Available' : 'Missing');
                    console.log('‚úÖ UDH experience:', supportedTypes.includes('udh') ? 'Available' : 'Missing');
                    console.log('‚úÖ Hotel rooms:', supportedTypes.includes('hotel') ? 'Available' : 'Missing');

                } else {
                    updateStatus('Failed to load booking system', 'error');
                }
            }, 500);
        });

        updateStatus('Loading Universal Booking System...', 'info');
    </script>
</body>

</html>