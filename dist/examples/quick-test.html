<!DOCTYPE html>
<html>
<head>
    <title>Quick Widget Test</title>
    <style>
        body { 
            font-family: system-ui, sans-serif; 
            max-width: 800px; 
            margin: 50px auto; 
            padding: 20px; 
            background: #f8fafc;
        }
        .test-button { 
            background: #3b82f6; 
            color: white; 
            padding: 15px 25px; 
            border: none; 
            border-radius: 8px; 
            font-size: 16px; 
            cursor: pointer; 
            margin: 10px;
            transition: background 0.2s;
        }
        .test-button:hover { 
            background: #2563eb; 
        }
        .status { 
            padding: 15px; 
            margin: 20px 0; 
            border-radius: 8px; 
            background: #f0f9ff; 
            border-left: 4px solid #3b82f6;
        }
    </style>
</head>
<body>
    <h1>ðŸ§ª Quick Widget Test</h1>
    <p>Simple test page to verify widget functionality</p>
    
    <div class="status" id="status">Status: Loading...</div>
    
    <button onclick="quickTest()" class="test-button">ðŸš€ Quick Test</button>
    <button onclick="testEvents()" class="test-button">ðŸ“¡ Test Events</button>
    <button onclick="cleanup()" class="test-button">ðŸ§¹ Cleanup</button>

    <script src="../universal-booking-widget.min.js"></script>
    <script>
        function updateStatus(msg) {
            document.getElementById('status').textContent = 'Status: ' + msg;
            console.log('Status:', msg);
        }

        function quickTest() {
            updateStatus('Creating widget...');
            try {
                const widget = UniversalBookingWidget.init({
                    businessType: 'events',
                    branding: { companyName: 'Quick Test' }
                });
                widget.open();
                updateStatus('Widget opened successfully!');
            } catch (error) {
                updateStatus('Error: ' + error.message);
                console.error('Widget error:', error);
            }
        }

        function testEvents() {
            updateStatus('Testing events...');
            
            document.addEventListener('ubw:open-widget', () => {
                updateStatus('Open event received!');
            });
            
            const widget = UniversalBookingWidget.init({
                businessType: 'events',
                branding: { companyName: 'Event Test' }
            });
            widget.open();
        }

        function cleanup() {
            const count = UniversalBookingWidget.getInstances().length;
            UniversalBookingWidget.destroyAll();
            updateStatus(`Cleaned up ${count} widgets`);
        }

        // Check if widget loaded
        window.addEventListener('load', () => {
            setTimeout(() => {
                if (typeof UniversalBookingWidget !== 'undefined') {
                    updateStatus('Widget system ready!');
                } else {
                    updateStatus('ERROR: Widget failed to load');
                }
            }, 100);
        });
    </script>
</body>
</html>